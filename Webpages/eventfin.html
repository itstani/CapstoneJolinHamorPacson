<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event Confirmation</title>
    <style>/* test *//*test*//*test*/
      body { 
        font-family: Arial, sans-serif;
        background-color: #f3f3f3;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }

      .confirmation-container {
        background-color: #ffffff;
        border-radius: 10px;
        padding: 20px;
        max-width: 400px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        color: #333;
        text-align: center;
      }

      .confirmation-container h2 {
        color: #af2630;
      }

      .confirmation-detail {
        text-align: left;
        margin: 15px 0;
        font-size: 16px;
      }

      .proceed-button {
        background-color: #c44c57;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      .back-button {
        background-color: #c44c57;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .proceed-button:hover {
        background-color: #b93e4b;
      }
    </style>
  </head>
  <body>
    <div class="confirmation-container">
      <h2>Event Confirmation</h2>
      <div id="confirmationDetails" class="confirmation-detail"></div>
      <button id="proceedButton" class="proceed-button">
        Proceed to Payment
      </button>
      <button id="backButton" class="back-button">Back</button>
    </div>

    <script>
      // Retrieve event data from sessionStorage
      const eventData = JSON.parse(sessionStorage.getItem("eventData"));

      // Display the event details
      const confirmationDetails = document.getElementById(
        "confirmationDetails"
      );
      if (eventData) {
  confirmationDetails.innerHTML = `
    <p><strong>Host Name:</strong> ${eventData.hostName}</p>
    <p><strong>Event Name:</strong> ${eventData.eventName}</p>
    <p><strong>Event Date:</strong> ${eventData.eventDate}</p>
    <p><strong>Event Start Time:</strong> ${eventData.startTime}</p>
    <p><strong>Event End Time:</strong> ${eventData.endTime}</p>
    <p><strong>Amenity:</strong> ${eventData.amenity}</p>
    <p><strong>Number of Guests:</strong> ${eventData.guests}</p>
    <p><strong>Homeowner Status:</strong> ${eventData.homeownerStatus}</p>
  `;
} else {
  confirmationDetails.innerHTML =
    "<p>Error: No event data available.</p>";
}


      // redirect to final payment nakalagay muna welcome wala pa html para sa final
      document.getElementById("proceedButton").addEventListener("click", () => {
        window.location.href = "payment.html";
      });

      // back button remove recent event from dtb
      document
        .getElementById("backButton")
        .addEventListener("click", async () => {
          const username = eventData.username;

          const response = await fetch("http://localhost:3000/delEvent", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ username }),
          });

          const result = await response.json();
          if (result.success) {
            alert("Most recent event deleted successfully.");
          } else {
            alert(result.message);
          }

          window.location.href = "addevent.html";
        });
    </script>
  </body>
</html>
